<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig",version:"main",path:"base"},dependencies:[{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js"},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css",global:true}]},init:function(e){var t,n,r,i,c,a,o,l,u,d,s,f=this;t=e.root,n=e.context,r=e.pubsub,i=e.data;c=n.ldview,a=n.ldcolor,o=n.ldcolorpicker;this._meta=i;this.render=function(){r.fire("render");if(typeof s!="undefined"&&s!==null){return s.render()}};this.set=function(e){this.c=e;if(!(e==="currentColor"||e==="transparent"||isNaN(a.hsl(e).h))){this.ldcp.setColor(e)}return this.render()};this.prepareDefault=function(e){var t;e==null&&(e={});this["default"]=(t=e.data["default"])==="currentColor"||t==="transparent"?e.data["default"]:a.web(e.data["default"]||this.ldcp.getColor());if(e.overwrite){return this.set(this["default"])}};r.fire("init",{get:function(){return f.c},set:function(e){return f.set(e)},default:function(){return f["default"]},meta:function(e){f._meta=e;f.ldcp.setPalette(e.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"]);if(e.idx!=null){f.ldcp.setIdx(e.idx)}return f.prepareDefault({overwrite:true,data:e})}});l=i.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"];u=a.web(i["default"]);if(!in$(u,l.concat(["transparent","currentColor"]))){l=[u].concat(l)}this.ldcp=new o(t.querySelector("[ld~=input]"),{className:"round shadow-sm round flat compact-palette no-empty-color vertical",palette:l,idx:~(d=l.indexOf(u))?d:0,context:i.context||"random",exclusive:i.exclusive!=null?i.exclusive:true});this.prepareDefault({overwrite:true,data:i});s=new c({root:t,action:{keyup:{input:function(e){var t,n,r;t=e.node,n=e.ctx,r=e.evt;if(r.keyCode===13){f.ldcp.setColor(t.value);return f.c=t.value}}},click:{default:function(e){var t,n;t=e.node,n=e.ctx;f.c="currentColor";r.fire("event","change",f.c);return f.render()}}},handler:{preset:{list:function(){return f._meta.presets||[]},key:function(e){return e},view:{text:{"@":function(e){var t;t=e.ctx;return t}},action:{click:{"@":function(e){var t;t=e.ctx;f.c=t;r.fire("event","change",f.c);return f.render()}}}}},color:function(e){var t,n,r;t=e.node,n=e.ctx;r=a.web(f.c);if(t.nodeName.toLowerCase()==="input"){return t.value=isNaN(a.hsl(f.c).h)?f.c:r}else{return t.style.backgroundColor=r}}}});return this.ldcp.on("change",function(e){f.c=a.web(e);r.fire("event","change",f.c);return f.render()})}};function in$(e,t){var n=-1,r=t.length>>>0;while(++n<r)if(e===t[n])return true;return false}</script></div>