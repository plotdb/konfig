<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"master",path:"base"},dependencies:[{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js"},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css",global:true}]},init:function(e){var t,n,r,o,i,l,a,c,u=this;t=e.root,n=e.context,r=e.pubsub,o=e.data;i=n.ldview,l=n.ldcolor,a=n.ldcolorpicker;this._meta=o;this.render=function(){r.fire("render");if(typeof c!="undefined"&&c!==null){return c.render()}};this.set=function(e){this.c=e;if(e!=="currentColor"){this.ldcp.setColor(e)}return this.render()};this.prepareDefault=function(e){e==null&&(e={});this["default"]=e.data["default"]==="currentColor"?"currentColor":l.web(e.data["default"]||this.ldcp.getColor());if(e.overwrite){return this.set(this["default"])}};r.fire("init",{get:function(){return u.c},set:function(e){return u.set(e)},default:function(){return u["default"]},meta:function(e){u._meta=e;u.ldcp.setPalette(e.palette);if(e.idx!=null){u.ldcp.setIdx(e.idx)}return u.prepareDefault({overwrite:true,data:e})}});this.ldcp=new a(t.querySelector("[ld~=input]"),{className:"round shadow-sm round flat compact-palette no-button no-empty-color vertical",palette:(o["default"]?[o["default"]]:[]).concat(o.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"]),context:o.context||"random",exclusive:o.exclusive!=null?o.exclusive:true});this.prepareDefault({overwrite:true,data:o});c=new i({root:t,action:{keyup:{input:function(e){var t,n,r;t=e.node,n=e.ctx,r=e.evt;if(r.keyCode===13){u.ldcp.setColor(t.value);return u.c=t.value}}},click:{default:function(e){var t,n;t=e.node,n=e.ctx;u.c="currentColor";r.fire("event","change",u.c);return u.render()}}},handler:{color:function(e){var t,n,r;t=e.node,n=e.ctx;r=l.web(u.c);if(t.nodeName.toLowerCase()==="input"){return t.value=r}else{return t.style.backgroundColor=r}}}});return this.ldcp.on("change",function(e){u.c=l.web(e);r.fire("event","change",u.c);return u.render()})}};</script></div>