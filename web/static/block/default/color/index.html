<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig",version:"main",path:"base"},dependencies:[{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js"},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css",global:true}]},init:function(e){var t,n,r,i,a,o,c,l,u=this;t=e.root,n=e.context,r=e.pubsub,i=e.data;a=n.ldview,o=n.ldcolor,c=n.ldcolorpicker;this._meta=i;this.render=function(){r.fire("render");if(typeof l!="undefined"&&l!==null){return l.render()}};this.set=function(e){this.c=e;if(!(e==="currentColor"||e==="transparent"||isNaN(o.hsl(e).h))){this.ldcp.setColor(e)}return this.render()};this.prepareDefault=function(e){var t;e==null&&(e={});this["default"]=(t=e.data["default"])==="currentColor"||t==="transparent"?e.data["default"]:o.web(e.data["default"]||this.ldcp.getColor());if(e.overwrite){return this.set(this["default"])}};r.fire("init",{get:function(){return u.c},set:function(e){return u.set(e)},default:function(){return u["default"]},meta:function(e){u._meta=e;u.ldcp.setPalette(e.palette);if(e.idx!=null){u.ldcp.setIdx(e.idx)}return u.prepareDefault({overwrite:true,data:e})}});this.ldcp=new c(t.querySelector("[ld~=input]"),{className:"round shadow-sm round flat compact-palette no-empty-color vertical",palette:(i["default"]?[i["default"]]:[]).filter(function(e){return!(e==="transparent"||e==="currentColor")}).concat(i.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"]),context:i.context||"random",exclusive:i.exclusive!=null?i.exclusive:true});this.prepareDefault({overwrite:true,data:i});l=new a({root:t,action:{keyup:{input:function(e){var t,n,r;t=e.node,n=e.ctx,r=e.evt;if(r.keyCode===13){u.ldcp.setColor(t.value);return u.c=t.value}}},click:{default:function(e){var t,n;t=e.node,n=e.ctx;u.c="currentColor";r.fire("event","change",u.c);return u.render()}}},handler:{preset:{list:function(){return u._meta.presets||[]},key:function(e){return e},view:{text:{"@":function(e){var t;t=e.ctx;return t}},action:{click:{"@":function(e){var t;t=e.ctx;u.c=t;r.fire("event","change",u.c);return u.render()}}}}},color:function(e){var t,n,r;t=e.node,n=e.ctx;r=o.web(u.c);if(t.nodeName.toLowerCase()==="input"){return t.value=isNaN(o.hsl(u.c).h)?u.c:r}else{return t.style.backgroundColor=r}}}});return this.ldcp.on("change",function(e){u.c=o.web(e);r.fire("event","change",u.c);return u.render()})}};</script></div>