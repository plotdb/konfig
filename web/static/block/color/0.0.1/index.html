<div><div>color</div><div ld="color"></div><style type="text/css">[ld=color] {
  width: 100%;
  height: 2em;
  border-radius: 0.25em;
  border: 1px solid #ccc;
  cursor: pointer;
}
</style><script type="@plotdb/block">(function(it){
  return it();
})(function(){
  var blockFactory;
  blockFactory = {
    pkg: {
      name: 'color',
      version: '0.0.1',
      dependencies: [
        {
          url: "/assets/lib/ldcolor/main/ldcolor.min.js",
          async: false
        }, {
          url: "/assets/lib/@loadingio/ldcolorpicker/main/ldcp.min.js"
        }
      ]
    },
    init: function(arg$){
      var root, context, pubsub, ldcolor, obj, itf, view;
      root = arg$.root, context = arg$.context, pubsub = arg$.pubsub;
      ldcolor = context.ldcolor;
      this.obj = obj = {
        color: '#fff',
        evtHandler: {}
      };
      this.itf = itf = {
        get: function(){
          return import$({}, obj.color);
        },
        on: function(n, cb){
          var ref$;
          return ((ref$ = obj.evtHandler)[n] || (ref$[n] = [])).push(cb);
        },
        fire: function(n){
          var v, res$, i$, to$, ref$, len$, cb, results$ = [];
          res$ = [];
          for (i$ = 1, to$ = arguments.length; i$ < to$; ++i$) {
            res$.push(arguments[i$]);
          }
          v = res$;
          for (i$ = 0, len$ = (ref$ = obj.evtHandler[n] || []).length; i$ < len$; ++i$) {
            cb = ref$[i$];
            results$.push(cb.apply(this, v));
          }
          return results$;
        }
      };
      return view = new ldView({
        root: root,
        init: {
          color: function(arg$){
            var node;
            node = arg$.node;
            obj.ldcp = new ldcolorpicker(node);
            node.style.backgroundColor = ldcolor.web(obj.ldcp.getColor());
            return obj.ldcp.on('change', function(it){
              itf.fire('change', it);
              return node.style.backgroundColor = ldcolor.web(it);
            });
          }
        }
      });
    },
    'interface': function(){
      return this.itf;
    }
  };
  return blockFactory;
});
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
  return obj;
}</script></div>