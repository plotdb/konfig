<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/assets/lib/bootstrap/main/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/@loadingio/bootstrap.ext/main/index.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldcover/main/index.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldiconfont/main/ldif.min.css"><link rel="stylesheet" type="text/css" href="/css/index.css"><style type="text/css">.config {
  margin: 0 0 1em;
  flex: 1 1 200px;
  height: 3em;
}
</style></head><body><div class="w-1024 rwd mx-auto my-4 d-flex flex-column" style="gap:1em"><div class="border rounded shadow-sm p-4" ld="kfg-alt"><div ld-each="tab"><div ld-each="ctrl"></div></div></div><div class="d-flex flex-grow-1" style="gap:1em"><div class="d-flex flex-wrap" ld="kfg" style="gap:1em"><div class="tab p-2 border rounded shadow-sm" ld-each="tab" style="min-width:15em"><div class="text-center font-weight-bold p-1 mb-4 bg-secondary text-light rounded" ld="name"></div><div class="config mb-4" ld-each="ctrl"></div></div></div><div class="flex-grow-1"><div class="rounded shadow-sm border p-4 w-100 h-100" id="sample"></div></div></div></div><div class="ldcv default-size"><div class="base"><div class="inner"><h5>Dummy choices in a dummy popup</h5><div class="d-flex justify-content-around"><div class="btn btn-outline-secondary" data-ldcv-set="yes">Yes</div><div class="btn btn-outline-secondary" data-ldcv-set="no">No</div></div></div></div></div><script type="text/javascript" src="/assets/lib/bootstrap.native/main/bootstrap-native-v4.min.js"></script><script type="text/javascript" src="/assets/lib/ldcolor/main/ldcolor.min.js"></script><script type="text/javascript" src="/assets/lib/ldcover/main/index.min.js"></script><script type="text/javascript" src="/assets/lib/@loadingio/ldquery/main/ldq.min.js"></script><script type="text/javascript" src="/assets/lib/@loadingio/debounce.js/main/debounce.min.js"></script><script type="text/javascript" src="/assets/lib/proxise/main/proxise.min.js"></script><script type="text/javascript" src="/assets/lib/ldview/main/index.min.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/rescope/main/rescope.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/csscope/main/csscope.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/datadom/main/datadom.js"></script><script type="text/javascript" src="/assets/lib/ldpalettepicker/main/ldpp.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/block/main/block.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/konfig/dev/konfig.js"></script><script type="text/javascript" src="/assets/lib/@plotdb/konfig/dev/konfig.widget.bootstrap.js"></script><script>(function(it){
  return it.apply({});
})(function(){
  var popup, cfg, cfgAlt, sample, this$ = this;
  popup = {
    ldcv: new ldcover({
      root: ld$.find('.ldcv', 0)
    }),
    data: 'yes'
  };
  this.manager = new block.manager({
    registry: function(arg$){
      var name, version, path, type;
      name = arg$.name, version = arg$.version, path = arg$.path, type = arg$.type;
      if (type === 'block') {
        return "/block/" + name + "/" + version + "/" + (path || 'index.html');
      } else {
        return "/assets/lib/" + name + "/" + version + "/" + (path || '');
      }
    }
  });
  this.meta = {
    palette: {
      name: 'palette',
      type: 'palette',
      hint: "pick your favorite palette.",
      tab: 'color',
      palettes: ldpp.get('default')
    },
    number: {
      name: 'number',
      type: 'number',
      range: false,
      min: 10,
      max: 64,
      step: 1
    },
    boolean: {
      name: 'boolean',
      type: 'boolean'
    },
    color: {
      name: 'color',
      type: 'color',
      tab: 'color'
    },
    choice: {
      name: 'choice',
      type: 'choice',
      values: ['left', 'right', 'center'],
      'default': 'left'
    },
    text: {
      name: 'text',
      type: 'text',
      'default': 'default text'
    },
    paragraph: {
      name: 'paragraph',
      type: 'paragraph',
      'default': 'some points\n1. multiple lines. \n2. fit into ui.'
    },
    upload: {
      name: 'upload',
      type: 'upload',
      multiple: true
    },
    popup: {
      name: 'popup',
      type: 'popup',
      popup: {
        get: function(){
          return popup.ldcv.get();
        },
        'default': function(){
          return popup.data;
        },
        data: function(d){
          return Promise.resolve().then(function(){
            if (d != null) {
              return popup.data = d;
            } else {
              return popup.data;
            }
          });
        }
      }
    }
  };
  cfg = new konfig({
    root: ld$.find('[ld=kfg]', 0),
    debounce: false,
    meta: this.meta,
    view: 'default',
    manager: this.manager
    /*
    use-bundle: false
    manager: new block.manager registry: ({name, version, path}) ->
      ret = /^@plotdb\/konfig.widget.(.+)$/.exec(name)
      return if !ret => "/block/#name/#version/index.html"
      else "/block/#{ret.1}/#path/index.html"
    */,
    typemap: function(name){
      return {
        name: "@plotdb/konfig.widget.bootstrap",
        version: "master",
        path: name
      };
    }
  });
  cfg.on('change', function(it){
    return this$.update(it);
  });
  cfg.init().then(function(){
    return console.log('@plotdb/konfig cfg inited.');
  });
  cfgAlt = new konfig({
    root: ld$.find('[ld=kfg-alt]', 0),
    debounce: false,
    meta: {
      size: {
        type: 'number',
        min: 10,
        max: 32,
        step: 1,
        from: 10
      }
    },
    view: 'default',
    manager: this.manager,
    typemap: function(name){
      return {
        name: "@plotdb/konfig.widget.bootstrap",
        version: "master",
        path: name
      };
    }
  });
  cfgAlt.on('change', function(it){
    return ld$.find('[ld=kfg]', 0).style.fontSize = it.size + "px";
  });
  cfgAlt.init().then(function(){
    return console.log("@plotdb/konfig cfg-alt inited.");
  });
  sample = ld$.find('#sample', 0);
  this.val = {};
  return this.update = function(it){
    var ref$;
    this$.val = it;
    sample.innerText = (this$.val.text || '') + '\n' + (this$.val.paragraph || '');
    return ref$ = sample.style, ref$.color = ldcolor.web(this$.val.color || '#000'), ref$.fontFamily = this$.val.font || 'sans serif', ref$.fontSize = this$.val.number + "px", ref$.whiteSpace = 'pre-line', ref$.textAlign = this$.val.choice || 'left', ref$;
  };
});</script></body></html>