function import$(t,r){var n={}.hasOwnProperty;for(var e in r)n.call(r,e)&&(t[e]=r[e]);return t}var ctrl,configEditor,bmgr;(ctrl=function(t){return null==t&&(t={}),this.opt=import$({},t),this.name=t.name,this.type=t.type,this.evtHandler={},this}).prototype=import$(Object.create(Object.prototype),{set:function(){},get:function(){},on:function(t,r){var n;return((n=this.evtHandler)[t]||(n[t]=[])).push(r)},fire:function(t){var r,n,e,o,i,c,u,s=[];for(n=[],e=1,o=arguments.length;e<o;++e)n.push(arguments[e]);for(r=n,e=0,c=(i=this.evtHandler[t]||[]).length;e<c;++e)u=i[e],s.push(u.apply(this,r));return s}}),(configEditor=function(t){var r=this;return null==t&&(t={}),this.opt=import$({},t),this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.def=t.def,this.evtHandler={},this.ctrls={},this.init=proxise.once(function(){return r._init()}),this.init(),this}).bmgr=bmgr=new block.manager,configEditor.types=["choice","boolean","palette","color","number","text","paragraph","upload","font"],configEditor.init=proxise(function(){return bmgr.init().then(function(){return configEditor.types.map(function(t){return bmgr.set({name:"ctrl-"+t,version:"0.0.1",block:new block.class({root:"#ctrl-"+t})})})})}),configEditor.prototype=import$(Object.create(Object.prototype),{on:function(t,r){var n;return((n=this.evtHandler)[t]||(n[t]=[])).push(r)},fire:function(t){var r,n,e,o,i,c,u,s=[];for(n=[],e=1,o=arguments.length;e<o;++e)n.push(arguments[e]);for(r=n,e=0,c=(i=this.evtHandler[t]||[]).length;e<c;++e)u=i[e],s.push(u.apply(this,r));return s},_init:function(){return configEditor.init()},get:function(){},set:function(){},parse:function(){var t,r=this;return(t=function(n){var e,o;for(e in n)if(o=n[e]){if("group"===o.type)return t(o);r.ctrls[e]=new ctrl(o)}})(this.def)},render:function(){var t,r,n,e,o,i=this;r=[];for(n in e=this.ctrls)o=e[n].type,r.push(bmgr.get({name:"ctrl-"+o,version:"0.0.1"}).then(function(t){return t.create()}).then(function(t){return t.attach({root:i.root})}));return t=r,Promise.all(t)}});