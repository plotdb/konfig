function import$(t,r){var o={}.hasOwnProperty;for(var n in r)o.call(r,n)&&(t[n]=r[n]);return t}var ctrl,configEditor,bmgr;(ctrl=function(t){return null==t&&(t={}),this.opt=import$({},t),this.name=t.name,this.type=t.type,this.group=t.group,this.evtHandler={},this}).prototype=import$(Object.create(Object.prototype),{set:function(){},get:function(){},on:function(t,r){var o;return((o=this.evtHandler)[t]||(o[t]=[])).push(r)},fire:function(t){var r,o,n,e,i,u,s,p=[];for(o=[],n=1,e=arguments.length;n<e;++n)o.push(arguments[n]);for(r=o,n=0,u=(i=this.evtHandler[t]||[]).length;n<u;++n)s=i[n],p.push(s.apply(this,r));return p}}),(configEditor=function(t){var r=this;return null==t&&(t={}),this.opt=import$({},t),this.root="string"==typeof t.root?document.querySelector(t.root):t.root,this.def=t.def,this.evtHandler={},this.ctrls={},this.groups={},this.init=proxise.once(function(){return r._init()}),this.init(),this}).bmgr=bmgr=new block.manager,configEditor.types=["choice","boolean","palette","color","number","text","paragraph","upload","font"],configEditor.init=proxise(function(){return bmgr.init().then(function(){return configEditor.types.map(function(t){return bmgr.set({name:"ctrl-"+t,version:"0.0.1",block:new block.class({root:"#ctrl-"+t})})})})}),configEditor.prototype=import$(Object.create(Object.prototype),{on:function(t,r){var o;return((o=this.evtHandler)[t]||(o[t]=[])).push(r)},fire:function(t){var r,o,n,e,i,u,s,p=[];for(o=[],n=1,e=arguments.length;n<e;++n)o.push(arguments[n]);for(r=o,n=0,u=(i=this.evtHandler[t]||[]).length;n<u;++n)s=i[n],p.push(s.apply(this,r));return p},_init:function(){return configEditor.init()},get:function(){},set:function(){},parse:function(){var t,r,o,n,e,i=this,u=[];this.groups[""]={child:{},root:this.root,key:""},t=function(t,r){var o;return(o=document.createElement("div")).classList.add("group"),o.setAttribute("data-name",t),i.groups[t]=import$({child:{},root:o,key:t},r||{})},(r=function(o,n){var e,u,s=[];for(e in o)u=o[e],n.key&&(u.group=n.key),u&&(i.groups[u.group||""]||t(u.group||"",{}),"group"!==u.type?s.push(i.ctrls[e]=new ctrl(u)):(t(e,u),r(u,i.groups[e])));return s})(this.def,this.groups[""]);for(o in n=this.groups)e=n[o],o&&u.push(this.groups[e.group||""].root.appendChild(e.root));return u},render:function(){var t,r,o,n=this;return t=function(){var t,n=[];for(r in t=this.ctrls)o=t[r],n.push({k:r,v:o});return n}.call(this).map(function(t){var r,o;return t.k,r=t.v,o=r.type,bmgr.get({name:"ctrl-"+o,version:"0.0.1"}).then(function(t){return t.create()}).then(function(t){var o;return o=n.groups[r.group||""].root,t.attach({root:o})})}),Promise.all(t)}});