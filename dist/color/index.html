<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig",version:"main",path:"base"},dependencies:[{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js"},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css",global:true}]},init:function(e){var t,r,n,o,i,c,l,a,u,s,d=this;t=e.root,r=e.context,n=e.pubsub,o=e.data;i=r.ldview,c=r.ldcolor,l=r.ldcolorpicker;this._meta=o;this.render=function(){n.fire("render");if(typeof s!="undefined"&&s!==null){return s.render()}};this.set=function(e){this.c=e;if(!(e==="currentColor"||e==="transparent"||isNaN(c.hsl(e).h))){this.ldcp.setColor(e)}return this.render()};this.prepareDefault=function(e){var t;e==null&&(e={});this["default"]=(t=e["default"])==="currentColor"||t==="transparent"?e["default"]:c.web(e["default"]||this.ldcp.getColor());if(e.overwrite){return this.set(this["default"])}};a=function(e){var t,r,n;e==null&&(e={});t=e.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"];if(Array.isArray(t)){t={colors:t}}t.colors=t.colors.map(function(e){return c.web(e)});if(e["default"]){r=c.web(e["default"]);if(!in$(r,t.colors.concat(["transparent","currentColor"]))){t.colors=[r].concat(t.colors)}}else{r=t.colors[e.idx||0]||e.colors[0]}if(!~(n=t.colors.indexOf(r))){n=0}return{palette:t,default:r,idx:n}};n.fire("init",{get:function(){return d.c},set:function(e){return d.set(e)},default:function(){return d["default"]},meta:function(e){var t;d._meta=e;t=a(e);d.ldcp.setPalette(t.palette);if(t.idx!=null){d.ldcp.setIdx(t.idx)}return d.prepareDefault({overwrite:true,default:t["default"]})}});u=a(o);this.ldcp=new l(t.querySelector("[ld~=input]"),{className:"round shadow-sm round flat compact-palette no-empty-color vertical",palette:u.palette,idx:u.idx,context:o.context||"random",exclusive:o.exclusive!=null?o.exclusive:true});this.prepareDefault({overwrite:true,default:u["default"]});s=new i({root:t,action:{keyup:{input:function(e){var t,r,n;t=e.node,r=e.ctx,n=e.evt;if(n.keyCode===13){d.ldcp.setColor(t.value);return d.c=t.value}}},click:{default:function(e){var t,r;t=e.node,r=e.ctx;d.c="currentColor";n.fire("event","change",d.c);return d.render()}}},handler:{preset:{list:function(){return d._meta.presets||[]},key:function(e){return e},view:{text:{"@":function(e){var t;t=e.ctx;return t}},action:{click:{"@":function(e){var t;t=e.ctx;d.c=t;n.fire("event","change",d.c);return d.render()}}}}},color:function(e){var t,r,n;t=e.node,r=e.ctx;n=c.web(d.c);if(t.nodeName.toLowerCase()==="input"){return t.value=isNaN(c.hsl(d.c).h)?d.c:n}else{return t.style.backgroundColor=n}}}});return this.ldcp.on("change",function(e){d.c=c.web(e);n.fire("event","change",d.c);return d.render()})}};function in$(e,t){var r=-1,n=t.length>>>0;while(++r<n)if(e===t[r])return true;return false}</script></div>
