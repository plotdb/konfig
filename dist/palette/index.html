<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig",version:"main",path:"base"},dependencies:[{name:"ldbutton",version:"main",path:"index.min.css",global:true},{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"ldslider",version:"main",path:"index.min.js",async:false},{name:"ldslider",version:"main",path:"index.min.css",global:true},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css"},{name:"@loadingio/vscroll",version:"main",path:"index.min.js"},{name:"ldpalettepicker",version:"main",path:"index.min.css",global:true},{name:"ldpalettepicker",version:"main",path:"index.min.js"}]},init:function(e){var n,t,i,a,r,l,o,d,s,p,u,c;n=e.root,t=e.context,i=e.pubsub,a=e.data,r=e.i18n,l=e.manager;o=t.ldview,d=t.ldcolor,s=t.ldpp,p=t.ldcover;u={default:a["default"]||s.defaultPalette,pal:a["default"]||s.defaultPalette};i.fire("init",{get:function(){return u.pal},set:function(e){u.pal=e;return c.render()},default:function(){return u["default"]},meta:function(e){return u["default"]=e["default"]||s.defaultPalette}});n=ld$.find(n,"[plug=config]",0);c=new o({root:n,action:{click:{ldp:function(e){var n,t;n=e.node;t=n.getAttribute("data-action")||"edit";return Promise.resolve().then(function(){var e,n;if(u.initing){return u.initing()}if(u.ldpp){return}u.initing=proxise(function(){});e=Array.isArray(a.palettes)?a.palettes:typeof a.palettes==="string"?s.get(a.palettes):null;n=e?Promise.resolve(e):l.rescope.load([{name:"ldpalettepicker",version:"main",path:"index.min.js",async:false},{name:"ldpalettepicker",version:"main",path:"all.palettes.js"}]).then(function(e){var n;n=e.ldpp;return n.get("all")});return n.then(function(e){u.ldpp=new s({root:c.get("ldcv"),ldcv:{inPlace:false},useClusterizejs:true,i18n:r,palette:a.palette,palettes:e,useVscroll:true});if(!u.initing){return}u.initing.resolve();return u.initing=false})}).then(function(){u.ldpp.edit(u.pal,false);if(t==="edit"){u.ldpp.tab("edit")}else{u.ldpp.tab("view")}return u.ldpp.get()}).then(function(e){if(!e){return}u.pal=e;c.render("color");return i.fire("event","change",u.pal)})}}},handler:{color:{list:function(){var e;return((e=u.pal||(u.pal={})).colors||(e.colors=[])).map(function(e,n){return import$({_idx:n},d.hsl(e))})},key:function(e){return e._idx},handler:function(e){var n,t;n=e.node,t=e.data;return n.style.backgroundColor=d.web(t)}}}});return c.render()}};function import$(e,n){var t={}.hasOwnProperty;for(var i in n)if(t.call(n,i))e[i]=n[i];return e}</script></div>
