<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig",version:"main",path:"base"},dependencies:[{name:"@xlfont/load",version:"main",path:"index.min.js"},{name:"@xlfont/choose",version:"main",path:"index.min.js"},{name:"@xlfont/choose",version:"main",path:"index.min.css",global:true}],i18n:{en:{default:"Default"},"zh-TW":{"system default":"預設字型"}}},init:function(n){var e,t,o,r,i,a,u,f,l,c,s,d;e=n.root,t=n.context,o=n.data,r=n.pubsub,i=n.t;a=t.ldview,u=t.ldcover,f=t.xfc;l={font:null};c=function(){if(typeof l._m["default"]==="string"){return{name:l._m["default"]}}else{return l._m["default"]}};r.fire("init",{get:function(){var n;if(!l.font){return this["default"]()||""}return{name:(n=l.font).name,style:n.style,weight:n.weight}},set:function(n){l.font=!n?n:typeof n==="string"?{name:n}:{name:n.name,style:n.style,weight:n.weight};return d.render("font-name")},default:function(){return c()},meta:function(n){return l._meta=n},object:function(n){return s.load(n)["catch"](function(){return null})}});l._m=o||{};l.font=c();s=new f({root:!e?null:e.querySelector(".ldcv"),initRender:true,meta:"https://xlfont.maketext.io/meta",links:"https://xlfont.maketext.io/links"});s.init();if(!e){return}s.on("choose",function(n){return l.ldcv.set(n)});return d=new a({root:e,init:{ldcv:function(n){var e;e=n.node;l.ldcv=new u({root:e,inPlace:false});return l.ldcv.on("toggle.on",function(){return debounce(50).then(function(){return s.render()})})}},action:{click:{system:function(n){var e,t;e=n.node;l.font=t=null;d.render("font-name");return r.fire("event","change",t)},button:function(n){var e;e=n.node;return l.ldcv.get().then(function(n){if(!n){return}l.font=n?{name:n.name,style:n.style,weight:n.weight}:null;d.render("font-name");return r.fire("event","change",l.font)})}}},handler:{"font-name":function(n){var t,e;t=n.node;e=!l.font?i("default"):l.font.name||i("default");if(e.length>10){e=e.substring(0,10)+"..."}t.innerText=e;return Promise.resolve(l.font?s.load(l.font):l.font).then(function(n){var e;return t.setAttribute("class",(e=n&&n.className)?e:"")})["catch"](function(){})}}})}};</script></div>
